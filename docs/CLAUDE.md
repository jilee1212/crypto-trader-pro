# Crypto Trader Pro - 개발 가이드

**🎉 Phase 1-4 완료: 24시간 무인 자동매매 시스템 + 고급 기능 100% 구축 완료**

## 프로젝트 개요
- 목표: 월 5-10% 안정적 수익 달성
- 리스크 관리: 거래당 최대 1-2% 손실
- 주요 전략: RSI 기반 평균 회귀 전략 + 동적 포지션 사이징
- 운영 방식: 24시간 무인 자동매매 + 다중 채널 알림 + 자동 백업

## 기술 스택 (Phase 4 완료)
### 핵심 기술
- Python 3.12+ (최신 버전)
- SQLAlchemy 2.0+ (ORM 데이터베이스)
- Streamlit (웹 인터페이스)
- ccxt (거래소 API 통합)
- pandas, numpy (데이터 처리)

### Phase 4 추가 기술
- bcrypt + JWT (사용자 인증)
- Fernet (API 키 암호화)
- aiohttp (비동기 HTTP 통신)
- schedule (백업 스케줄링)
- PM2 (3-프로세스 관리)

## 시스템 아키텍처 (Phase 1-4 완료)

### Phase 1-2: 시스템 기반 구축 ✅
- **데이터베이스**: SQLAlchemy ORM, 사용자 격리, 암호화 저장
- **인증 시스템**: bcrypt + JWT, 세션 관리, API 키 보안
- **독립 거래 봇**: 웹과 분리된 백그라운드 프로세스

### Phase 3: 웹 인터페이스 ✅
- **인증 기반 대시보드**: 사용자별 개인화된 UI
- **실시간 모니터링**: 거래 상태, 포지션, 수익률 추적
- **거래 제어**: 웹에서 자동매매 시작/중단 실시간 제어

### Phase 4: 고급 기능 ✅
- **다중 채널 알림**: 이메일, 텔레그램, 웹 통합 알림
- **자동 백업**: 일일 DB 백업, 설정 백업, 재해 복구
- **PM2 3-프로세스**: 웹, 봇, 백업 독립 관리

## 거래 전략 (현재 구현)

### RSI 평균 회귀 전략
- RSI 기간: 14
- 과매도 진입: RSI ≤ 30 + 거래량 증가
- 과매수 청산: RSI ≥ 70
- 동적 포지션 사이징: 계좌 리스크 기반 자동 계산

### 리스크 관리 (DynamicRiskManager)
```python
포지션_크기 = 계좌_리스크_금액 ÷ (레버리지 × 손절_폭)
```
- 일일 손실 한도: 3%
- 연속 손실 시: 포지션 크기 자동 축소
- 레버리지 제한: 최대 10배

## 알림 시스템 (Phase 4)

### 알림 유형
- 거래 실행, 포지션 개시/종료
- AI 신호 생성, 손절/익절 트리거
- 시스템 오류, 일일 리포트

### 다중 채널 지원
- **이메일**: HTML 포맷, SMTP 전송
- **텔레그램**: 실시간 메시지, MarkdownV2
- **웹**: 브라우저 실시간 알림, SQLite 저장

## 백업 시스템 (Phase 4)

### 자동 스케줄링
- **일일 전체 백업**: 오전 2시
- **증분 백업**: 4시간마다
- **설정 백업**: 주간 (일요일)
- **정리 작업**: 월간

### 복구 시스템
- 전체/증분 백업 복원
- 사용자별 데이터 내보내기/가져오기
- 설정 파일 롤백
- 무결성 검증

## 코딩 스타일 및 보안

### 코딩 규칙
- 함수명: snake_case
- 클래스명: PascalCase
- 상수: UPPER_CASE
- 모든 함수에 docstring 필수
- 에러 핸들링 및 로깅 필수

### 보안 원칙
- API 키 Fernet 암호화 저장
- 비밀번호 bcrypt 해싱
- JWT 토큰 기반 세션 관리
- SQL Injection 방지 (SQLAlchemy ORM)
- 세션 격리 및 사용자별 권한 관리

## PM2 운영 (3-프로세스)

```javascript
crypto-trader-web     // 포트 8501 웹 서비스
crypto-trader-bot     // 백그라운드 거래 봇
crypto-trader-backup  // 자동 백업 스케줄러
```

### 배포 환경
- **서버**: Vultr Ubuntu 24.04 LTS
- **도메인**: http://nosignup.kr (24시간 운영)
- **프로세스 관리**: PM2 자동 재시작, 로그 관리